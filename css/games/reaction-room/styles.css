/* ===== Layout & theme (reuses main.css variables) ===== */
.wrap{padding:16px 0}
.grid{display:grid;grid-template-columns:1fr 320px;gap:16px}
@media (max-width:920px){.grid{grid-template-columns:1fr}}

.room{
  background:linear-gradient(180deg,#1a1f2e,var(--panel));
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px;
  padding:12px;
  min-height:420px;
}
.room-inner{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  grid-auto-rows:minmax(72px,1fr);
  gap:10px;
}
.cell{
  display:grid;place-items:center;
  border-radius:10px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.06);
  cursor:pointer;user-select:none;position:relative;
}

.shape{width:40px;height:40px;display:block}
.circle{border-radius:50%;background:rgba(255,255,255,.12)}
.square{background:rgba(255,255,255,.12)}
.triangle{
  width:0;height:0;border-left:20px solid transparent;border-right:20px solid transparent;border-bottom:40px solid rgba(255,255,255,.12)
}

/* Symbolic (suits & specials) – color suggestions for readability */
.shape.star{clip-path: polygon(50% 0%,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%); background:#f5d142}
.shape.moon{width:40px;height:40px;background:radial-gradient(circle at 30% 30%, #cfd6e4 55%, transparent 56%)}
.shape.club{clip-path: path('M20 6c3 0 5 2 5 5 0 2-1 3-2 4 2 0 4 2 4 5s-2 5-5 5c-2 0-3-1-4-2-1 1-2 2-4 2-3 0-5-2-5-5s2-5 4-5c-1-1-2-2-2-4 0-3 2-5 5-5 2 0 3 1 4 2 1-1 2-2 4-2z M16 25h8v3h-8z'); background:#8bd17c}
.shape.heart{clip-path: polygon(50% 82%, 20% 52%, 20% 32%, 35% 20%, 50% 28%, 65% 20%, 80% 32%, 80% 52%); background:#f47174}
.shape.diamond{transform: rotate(45deg); background:#e06c75}
.shape.spade{clip-path: path('M20 5c5 5 10 9 10 14 0 3-2 5-5 5-2 0-3-1-5-3-2 2-3 3-5 3-3 0-5-2-5-5 0-5 5-9 10-14z M16 25h8v3h-8z'); background:#6aa2f7}
.shape.bolt{clip-path: polygon(40% 0%, 60% 0%, 46% 40%, 66% 40%, 38% 100%, 48% 60%, 30% 60%); background:#ffd24a}
.shape.shield{clip-path: polygon(50% 0%, 85% 18%, 85% 58%, 50% 100%, 15% 58%, 15% 18%); background:#9aa4b2}

/* Side panel */
.side{
  background:linear-gradient(180deg,#1a1f2e,var(--panel));
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px;padding:14px
}
h2{margin:0 0 8px;font-size:18px}
.row{display:flex;gap:10px;flex-wrap:wrap;margin:8px 0 12px}
button{border:0;padding:10px 12px;border-radius:10px;font-weight:700;cursor:pointer}
.btn{background:var(--accent);color:#0b1020}
.btn-ghost{background:rgba(255,255,255,.06);color:var(--text)}
.stats{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:10px}
.card{background:rgba(255,255,255,.05);border-radius:10px;padding:10px;text-align:center}
.card h3{margin:0;font-size:12px;color:var(--muted)}
.card p{margin:6px 0 0;font-size:18px}
.log{margin-top:10px;max-height:140px;overflow:auto;border:1px solid rgba(255,255,255,.08);
     border-radius:10px;padding:8px;font-size:13px;color:#cfd6e4;background:rgba(255,255,255,.04)}
.countbox{display:flex;align-items:center;gap:10px;margin:8px 0 12px}
.badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);font-size:13px}

/* ===== States ===== */
.cell.correct{outline:2px solid var(--accent);background:rgba(122,162,247,.15)}
.cell.wrong{outline:2px solid #c04949;background:rgba(192,73,73,.18)}

/* Purple Lock visuals */
.cell.locked{outline: 2px dashed #a78bfa;background: rgba(167,139,250,.10) !important}
.cell.locked .shape.circle,.cell.locked .shape.square{background:#a78bfa !important}
.cell.locked .shape.triangle{border-left-color:transparent !important;border-right-color:transparent !important;border-bottom-color:#a78bfa !important}
.cell.locked::after{content:"";position:absolute;inset:0;border-radius:10px;box-shadow: inset 0 0 0 2px rgba(167,139,250,.25);pointer-events:none}

/* Neutral hinting */
.cell.hint-pulse{outline:2px solid rgba(167,139,250,.6);animation: hintPulse 1.1s ease-in-out infinite}
@keyframes hintPulse{0%{box-shadow:0 0 0 0 rgba(167,139,250,.45)}70%{box-shadow:0 0 0 10px rgba(167,139,250,0)}100%{box-shadow:0 0 0 0 rgba(167,139,250,0)}}
.cell.hint-dim{opacity:.55;filter:saturate(.5)}

/* Big target preview */
.preview{margin:6px 0 14px;display:grid;place-items:center;height:160px;background:rgba(255,255,255,.04);
         border:1px solid rgba(255,255,255,.08);border-radius:12px}
.preview .shape.big{width:100px;height:100px}
.preview .triangle.big{width:0;height:0;border-left:50px solid transparent;border-right:50px solid transparent;border-bottom:100px solid rgba(255,255,255,.12)}

/* Hide sidebar stats during play – JS shows at end */
.side .stats{display:none}

/* ===== Results Modal ===== */
.modal[hidden]{display:none}
.modal{position:fixed;inset:0;z-index:9999;display:grid;place-items:center;background:rgba(0,0,0,.5)}
.modal-dialog{width:min(720px,92vw);background:linear-gradient(180deg,#1a1f2e,var(--panel));
  border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:16px}
.modal h2{margin:0 0 12px}
.stat-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:10px}
.chip{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:10px;display:grid;gap:4px;text-align:center}
.chip span{font-size:12px;color:var(--muted)}
.chip strong{font-size:18px}
.table-wrap{max-height:300px;overflow:auto;border-radius:10px}
.splits{width:100%;border-collapse:collapse;font-size:14px}
.splits th,.splits td{padding:8px 10px;border-bottom:1px solid rgba(255,255,255,.08)}
.splits tbody tr:nth-child(even){background:rgba(255,255,255,.03)}
.modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}

/* Rules block list */
.rules{margin:10px 0 0 18px;line-height:1.6}
.rules li{margin:6px 0}

