<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Reaction Room — 2025-08-15</title>
<style>
  :root { --bg:#0f1115; --text:#e6edf3; --muted:#9aa4b2; --accent:#7aa2f7; --panel:#161a24; }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  a{color:inherit;text-decoration:none}

  /* Header (simple + consistent) */
  .header{position:sticky;top:0;z-index:50;background:rgba(15,17,21,.9);backdrop-filter:blur(8px);
          border-bottom:1px solid rgba(255,255,255,.08)}
  .nav{max-width:1080px;margin:0 auto;padding:0 16px;height:56px;display:flex;align-items:center;justify-content:space-between}
  .brand{font-weight:700}
  .links{display:flex;gap:10px}
  .link{padding:8px 10px;border-radius:8px;color:var(--muted)}
  .link:hover{background:rgba(255,255,255,.06);color:var(--text)}
  .cta{padding:8px 12px;border-radius:8px;background:var(--accent);color:#0b1020;font-weight:700}

  /* Layout */
  .wrap{max-width:1080px;margin:0 auto;padding:16px}
  .grid{display:grid;grid-template-columns:1fr 320px;gap:16px}
  @media (max-width:920px){ .grid{grid-template-columns:1fr} }

  /* Room */
  .room{background:linear-gradient(180deg,#1a1f2e,var(--panel));border:1px solid rgba(255,255,255,.08);
        border-radius:14px;padding:12px;min-height:420px}
  .room-inner{display:grid;grid-template-columns:repeat(5,1fr);grid-auto-rows:minmax(72px,1fr);gap:10px}
  .cell{display:grid;place-items:center;border-radius:10px;background:rgba(255,255,255,.04);
        border:1px solid rgba(255,255,255,.06);cursor:pointer;user-select:none}

  /* Shapes */
  .shape{width:40px;height:40px;display:block}
  .circle{border-radius:50%; background:rgba(255,255,255,.12)}
  .square{background:rgba(255,255,255,.12)}
  .triangle{width:0;height:0;border-left:20px solid transparent;border-right:20px solid transparent;border-bottom:40px solid rgba(255,255,255,.12)}

  /* Sidebar */
  .side{background:linear-gradient(180deg,#1a1f2e,var(--panel));border:1px solid rgba(255,255,255,.08);
        border-radius:14px;padding:14px}
  h2{margin:0 0 8px;font-size:18px}
  .row{display:flex;gap:10px;flex-wrap:wrap;margin:8px 0 12px}
  button{border:0;padding:10px 12px;border-radius:10px;font-weight:700;cursor:pointer}
  .btn{background:var(--accent);color:#0b1020}
  .btn-ghost{background:rgba(255,255,255,.06);color:var(--text)}
  .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:10px}
  .card{background:rgba(255,255,255,.05);border-radius:10px;padding:10px;text-align:center}
  .card h3{margin:0;font-size:12px;color:var(--muted)}
  .card p{margin:6px 0 0;font-size:18px}
  .log{margin-top:10px;max-height:220px;overflow:auto;border:1px solid rgba(255,255,255,.08);
       border-radius:10px;padding:8px;font-size:13px;color:#cfd6e4;background:rgba(255,255,255,.04)}
  .muted{color:var(--muted);font-size:12px}

  /* Countdown + target + lives */
  .countbox{display:flex; align-items:center; gap:10px; margin:8px 0 12px}
  .badge{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:6px 10px;border-radius:999px;
         background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);font-size:13px}
  .target-chip{background:var(--accent); color:#0b1020; border-color:transparent; font-weight:700}
  .chip-shape{display:inline-block; width:16px; height:16px}
  .chip-shape.circle{border-radius:50%; background:#0b1020}
  .chip-shape.square{background:#0b1020}
  .chip-shape.triangle{width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-bottom:16px solid #0b1020}

  /* Misclick flash */
  .cell.flash { outline: 2px solid #a33; animation: flash .25s ease; }
  @keyframes flash { from { background: rgba(255,0,0,.2); } to { background: rgba(255,255,255,.04); } }
</style>
</head>
<body>
  <header class="header">
    <div class="nav">
      <div class="brand">Reaction Room • 2025-08-15</div>
      <nav class="links">
        <a class="link" href="/">← Home</a>
        <a class="cta" href="https://www.linkedin.com/in/YOUR-LINKEDIN" target="_blank" rel="noopener noreferrer">LinkedIn</a>
      </nav>
    </div>
  </header>

  <div class="wrap">
    <div class="grid">
      <!-- Room -->
      <section class="room">
        <div id="room" class="room-inner" aria-label="Room grid">
          <!-- Cells injected by JS -->
        </div>
      </section>

      <!-- Sidebar -->
      <aside class="side">
        <h2>Round</h2>

        <!-- Countdown + target (side only) -->
        <div class="countbox">
          <span class="badge">Countdown: <strong id="cd">—</strong></span>
          <span id="targetBadge" class="badge">Target: <span id="targetName" style="margin-left:6px;color:#cfd6e4">—</span></span>
        </div>

        <!-- Lives -->
        <div class="countbox">
          <span class="badge">Lives: <strong id="lives">3</strong></span>
        </div>

        <div class="row">
          <button id="start" class="btn">Start</button>
          <button id="reset" class="btn-ghost">Reset</button>
        </div>

        <h2>Stats</h2>
        <div class="stats">
          <div class="card"><h3>Last</h3><p id="last">—</p></div>
          <div class="card"><h3>Best</h3><p id="best">—</p></div>
          <div class="card"><h3>Average</h3><p id="avg">—</p></div>
        </div>

        <div class="log" id="log"></div>
      </aside>
    </div>
  </div>

<script>
(() => {
  const roomEl = document.getElementById('room');
  const startBtn = document.getElementById('start');
  const resetBtn = document.getElementById('reset');
  const lastEl = document.getElementById('last');
  const bestEl = document.getElementById('best');
  const avgEl = document.getElementById('avg');
  const logEl = document.getElementById('log');
  const cdEl = document.getElementById('cd');
  const targetBadge = document.getElementById('targetBadge');
  const targetNameEl = document.getElementById('targetName');
  const livesEl = document.getElementById('lives');

  const SHAPES = ['circle','square','triangle'];
  const CELLS = 25;                 // 5x5 grid
  const COUNT_STEPS = [3,2,1];      // side countdown only
  const JITTER_MIN = 400;           // small random delay before reveal
  const JITTER_MAX = 1200;

  let startedAt = 0;
  let playing = false;
  let targetShape = null;
  let results = [];
  let countdownTimer = null;
  let revealTimer = null;
  let cells = [];
  let lives = 3;

  function ms(x){ return `${Math.round(x)} ms`; }

  function setLives(v){ lives = v; livesEl.textContent = String(lives); }

  function log(msg){
    const line = document.createElement('div');
    line.textContent = msg;
    logEl.prepend(line);
  }

  function updateStats(rt){
    results.push(rt);
    const last = rt;
    const best = Math.min(...results);
    const avg = results.reduce((a,b)=>a+b,0)/results.length;
    lastEl.textContent = ms(last);
    bestEl.textContent = ms(best);
    avgEl.textContent = ms(avg);
  }

  function clearTimers(){
    if (countdownTimer) { clearInterval(countdownTimer); countdownTimer = null; }
    if (revealTimer) { clearTimeout(revealTimer); revealTimer = null; }
  }

  function resetUI(){
    clearTimers();
    cdEl.textContent = '—';
    targetNameEl.textContent = '—';
    targetBadge.classList.remove('target-chip');
    startedAt = 0;
    playing = false;
  }

  function buildGrid(){
    roomEl.innerHTML = '';
    cells = [];
    for (let i = 0; i < CELLS; i++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      // random shape on the board already
      const shape = SHAPES[Math.floor(Math.random()*SHAPES.length)];
      cell.dataset.shape = shape;
      cell.appendChild(makeShapeEl(shape));
      cell.addEventListener('click', () => handleClick(shape, cell));
      cells.push(cell);
      roomEl.appendChild(cell);
    }
  }

  function makeShapeEl(shape){
    if (shape === 'triangle') {
      const tri = document.createElement('div');
      tri.className = 'shape triangle';
      return tri;
    } else {
      const el = document.createElement('div');
      el.className = `shape ${shape}`;
      return el;
    }
  }

  function sideCountdownThenReveal(){
    let idx = 0;
    cdEl.textContent = COUNT_STEPS[idx];
    countdownTimer = setInterval(() => {
      idx++;
      if (idx >= COUNT_STEPS.length) {
        clearInterval(countdownTimer); countdownTimer = null;
        const jitter = JITTER_MIN + Math.random()*(JITTER_MAX - JITTER_MIN);
        revealTimer = setTimeout(revealTarget, jitter);
      } else {
        cdEl.textContent = COUNT_STEPS[idx];
      }
    }, 500);
  }

  function revealTarget(){
    // pick a target shape (from the 3)
    targetShape = SHAPES[Math.floor(Math.random()*SHAPES.length)];
    // show it in the badge
    targetNameEl.innerHTML = '';
    const icon = document.createElement('span');
    icon.className = `chip-shape ${targetShape}`;
    targetNameEl.appendChild(icon);
    const label = document.createElement('span');
    label.textContent = ` ${targetShape}`;
    targetNameEl.appendChild(label);
    targetBadge.classList.add('target-chip');

    startedAt = performance.now();
    playing = true;
    log(`Target: ${targetShape}`);
  }

  function handleClick(clickedShape, cellEl){
    if (!playing) return;

    const hit = (clickedShape === targetShape);
    if (!hit) {
      // wrong tile → lose a life
      setLives(Math.max(0, lives - 1));
      log(`Miss (clicked ${clickedShape}). Lives left: ${lives}`);
      // quick visual feedback on all cells of that wrong shape
      cells.forEach(c => {
        if (c.dataset.shape === clickedShape) {
          c.classList.add('flash');
          setTimeout(() => c.classList.remove('flash'), 200);
        }
      });
      if (lives === 0) {
        playing = false;
        log(`Out of lives. Round over.`);
      }
      return;
    }

    // correct hit → measure & record
    const rt = performance.now() - startedAt;
    playing = false;
    updateStats(rt);
    log(`Hit ${targetShape} in ${ms(rt)}`);
  }

  startBtn.addEventListener('click', () => {
    resetUI();
    setLives(3);
    buildGrid();
    sideCountdownThenReveal();
  });

  resetBtn.addEventListener('click', () => {
    results = [];
    lastEl.textContent = bestEl.textContent = avgEl.textContent = '—';
    logEl.textContent = '';
    resetUI();
    setLives(3);
    buildGrid();
  });

  // Space to start
  window.addEventListener('keydown', (e) => {
    if (e.code === 'Space') { e.preventDefault(); startBtn.click(); }
  });

  // initial render
  buildGrid();
})();
</script>
</body>
</html>

